# eagle_eyes
این کد یک ربات معاملاتی (Robot) برای پلتفرم cTrader در زبان C# است که به طور خودکار موقعیت‌های باز (Open Positions) را بررسی می‌کند و در صورت نیاز، استاپ‌لاس (Stop Loss) و تیک‌پروفیت (Take Profit) را برای آن‌ها تنظیم می‌کند. در ادامه توضیحات مربوط به هر بخش از کد ارائه شده است:

### 1. **کلاس `SymbolExtensions`**
   - این کلاس شامل یک متد توسعه‌دهنده (`Extension Method`) به نام `NormalizePips` است که مقدار پیپ‌ها را با توجه به اندازه پیپ (Pip Size) سمبل (Symbol) نرمال‌سازی می‌کند. این متد برای تبدیل مقدار پیپ به مقدار قیمتی استفاده می‌شود.

### 2. **کلاس `Sample`**
   - این کلاس اصلی ربات است که از `Robot` ارث‌بری می‌کند و شامل متدهای مختلف برای مدیریت موقعیت‌ها است.

   #### **پارامتر `RiskRewardRatio`**
   - این پارامتر نسبت ریسک به ریوارد (Risk/Reward Ratio) را تعیین می‌کند و به طور پیش‌فرض مقدار 3.0 دارد. این نسبت برای محاسبه تیک‌پروفیت بر اساس استاپ‌لاس استفاده می‌شود.

   #### **متد `OnStart`**
   - این متد هنگام شروع ربات اجرا می‌شود و یک تایمر (Timer) را با فاصله زمانی 10 ثانیه راه‌اندازی می‌کند. این تایمر به طور منظم موقعیت‌های باز را بررسی می‌کند.

   #### **متد `OnTimer`**
   - این متد هر 10 ثانیه یک‌بار اجرا می‌شود و متد `CheckAndModifyPositions` را فراخوانی می‌کند تا موقعیت‌های باز را بررسی و در صورت نیاز، آن‌ها را تغییر دهد.

   #### **متد `CheckAndModifyPositions`**
   - این متد تمام موقعیت‌های باز را بررسی می‌کند و در صورتی که موقعیتی برای سمبل فعلی وجود داشته باشد و استاپ‌لاس نداشته باشد، استاپ‌لاس و تیک‌پروفیت را محاسبه و اعمال می‌کند.

   #### **متد `CalculateStopLossPrice`**
   - این متد قیمت استاپ‌لاس را بر اساس آخرین قیمت بسته‌شدن (Close Price) کندل قبلی محاسبه می‌کند. برای موقعیت‌های خرید (Buy)، استاپ‌لاس به اندازه `closePrice / 1024` زیر قیمت فعلی (Bid) قرار می‌گیرد و برای موقعیت‌های فروش (Sell)، استاپ‌لاس به اندازه `closePrice / 1024` بالای قیمت فعلی (Ask) قرار می‌گیرد.

   #### **متد `CalculateTakeProfitPrice`**
   - این متد قیمت تیک‌پروفیت را بر اساس فاصله استاپ‌لاس و نسبت ریسک به ریوارد محاسبه می‌کند. برای موقعیت‌های خرید، تیک‌پروفیت به اندازه `stopLossDistance * RiskRewardRatio` بالای قیمت ورود (Entry Price) قرار می‌گیرد و برای موقعیت‌های فروش، تیک‌پروفیت به اندازه `stopLossDistance * RiskRewardRatio` زیر قیمت ورود قرار می‌گیرد.

### 3. **چگونگی عملکرد ربات**
   - ربات هر 10 ثانیه یک‌بار موقعیت‌های باز را بررسی می‌کند.
   - اگر موقعیتی بدون استاپ‌لاس باشد، استاپ‌لاس و تیک‌پروفیت را محاسبه و اعمال می‌کند.
   - استاپ‌لاس بر اساس آخرین قیمت بسته‌شدن کندل قبلی و تیک‌پروفیت بر اساس نسبت ریسک به ریوارد محاسبه می‌شود.

### 4. **استفاده در GitHub**
   - برای استفاده از این کد در GitHub، می‌توانید آن را در یک فایل با پسوند `.cs` قرار دهید و در ریپوزیتوری خود آپلود کنید. همچنین می‌توانید توضیحات مربوط به نحوه اجرا و تنظیمات ربات را در فایل `README.md` اضافه کنید تا کاربران دیگر به راحتی از آن استفاده کنند.

این ربات به عنوان یک نمونه ساده برای مدیریت خودکار موقعیت‌ها در پلتفرم cTrader طراحی شده است و می‌تواند بر اساس نیازهای معاملاتی شما سفارشی‌سازی شود.
